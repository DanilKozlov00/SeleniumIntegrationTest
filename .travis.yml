# Languages https://docs.travis-ci.com/user/languages/java/
language: java
jdk:
  - oraclejdk11
sudo: required
dist: trusty
addons: # get google-chrome-stable
  chrome: stable
deploy:
  provider: releases
  api_key:bdaa95a0747158436623af8fb42be6cb2b4c2716
  
  skip_cleanup: true
  on:
    tags: true
  branches: Test
before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 

install: 
    - wget -N http://chromedriver.storage.googleapis.com/2.43/chromedriver_linux64.zip -P ~/
    - unzip ~/chromedriver_linux64.zip -d ~/
    - rm ~/chromedriver_linux64.zip
    - sudo mv -f ~/chromedriver /usr/local/share/
    - sudo chmod +x /usr/local/share/chromedriver

# Improve Build Speed https://dzone.com/articles/travis-ci-tutorial-java-projects
cache:
  directories:
  - $HOME/.m2

# Codecov https://github.com/codecov/example-java
after_success:
  - bash <(curl -s https://codecov.io/bash)

env:
  global:
  - CODECOV_TOKEN="429f7dbf-9c98-41aa-87d3-8c14e0e07703"
